pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
--simple_draw
--tomkay.dev

-- globals --

-- pointer
p={
	x=64, 
	y=64, 
	l_mx=stat(32), 
	l_my=stat(33),
	spd=1
}

-- particles
parts={}
radius=0
clr=7

function _init()

-- enables devkit
	poke(0x5f2d,0x1+0x2+0x4)

end


function _update()

-- mouse movement
	if (stat(32) != p.l_mx) then
		p.x=stat(32)
		p.l_mx=stat(32)
	end
	if stat(33) != p.l_my then
		p.y=stat(33)
		p.l_my=stat(33)
	end

-- button movement
	if (btn(‚¨ÖÔ∏è)) p.x-=p.spd
	if (btn(‚û°Ô∏è)) p.x+=p.spd
	if (btn(‚¨ÜÔ∏è)) p.y-=p.spd
	if (btn(‚¨áÔ∏è)) p.y+=p.spd

-- keep pointer sprite on screen
	if (p.x < 0) p.x=0
	if (p.x > 126) p.x=126
	if (p.y < 0) p.y=0 
	if (p.y > 126) p.y=126

-- action
	if btnp(üÖæÔ∏è) then clr_parts()
	elseif btn(‚ùé) then add_part()
	end

end


function _draw()

	cls()

-- draw player pointer
	if btn(üÖæÔ∏è) then
		spr(1,p.x,p.y)
	elseif btn(‚ùé) then
		spr(1,p.x,p.y)
	else
		spr(0,p.x,p.y)
	end

-- draw pixels
	for i in all(parts) do
		circfill(i.x,i.y,i.r,clr)
	end

end


function add_part()
	add(parts,{
		x=p.x,
		y=p.y,
		r=radius,
		l=120,
	})
end


function clr_parts()
	sfx(0)
	
	parts={}

end
__gfx__
03000000003000000000000000077000700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
37300000037300000000000000077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
37630000037330000000000000777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
37763000037773000000000007777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
37776300377777300000000070777707000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
37763000377776300000000000777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
03373000037763000000000000700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000003330000000000000700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000100000505032050000500005000050000500005000050000500005000050000500005000050000500005000050000500005000050000000000000000000000000000000000000000000000000000000000000
000100002c75000750037500375004750037500275000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
